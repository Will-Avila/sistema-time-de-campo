(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{133:function(e,t,s){Promise.resolve().then(s.bind(s,3752)),Promise.resolve().then(s.bind(s,4861))},1828:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(4999).Z)("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},9580:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(4999).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2457:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(4999).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},8670:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(4999).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},3752:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var a=s(3827),r=s(4090),l=s(7907),n=s(5671),o=s(3277),d=s(2782),i=s(8670),c=s(4999);let u=(0,c.Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var x=s(9580);let m=(0,c.Z)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);var f=s(1828),h=s(2457);let p=(0,c.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var b=s(3204),g=s(2169),v=s(9724),k=s(4187),w=s(6490),j=s(7913);function N(e){let{label:t,osStatus:s,execution:r,className:l,showIcon:n=!0}=e,d=t,i="secondary",c=v.Z;if(t){d=t,i=(0,g.A)(t);let e=t.toLowerCase();e.includes("conclu\xed")||e.includes("conclui")||e.includes("encerrada")?c=k.Z:e.includes("an\xe1lise")||e.includes("analise")?c=w.Z:(e.includes("execu\xe7\xe3o")||e.includes("execucao"))&&(c=j.Z)}else if(void 0!==s){let e=(0,g.x)({osStatus:s,execution:r});d=e.label,i=e.variant,c=e.icon}return(0,a.jsxs)(o.C,{variant:i,className:l,children:[n&&(0,a.jsx)(c,{className:"mr-1.5 h-3.5 w-3.5"}),d]})}function y(e){let{initialOSList:t,initialUf:s,initialSearch:c,initialStatus:g}=e,[v,k]=(0,r.useState)(s||"Todos"),[w,j]=(0,r.useState)(c||""),[y,C]=(0,r.useState)(g||"Abertas"),[M,Z]=(0,r.useState)(1),[T,S]=(0,r.useState)(null),A=(0,l.useRouter)();(0,r.useEffect)(()=>{let e=setTimeout(()=>{w!==(c||"")&&(0,b.ex)("lastSearch",w).then(()=>A.refresh())},500);return()=>clearTimeout(e)},[w,c,A]);let L={Abertas:["iniciar","em execu\xe7\xe3o","em execucao","pend. cliente","conclu\xedda - em an\xe1lise","sem execu\xe7\xe3o - em an\xe1lise"],ConcluÃ­das:["conclu\xeddo","concluido","encerrada","conclu\xedda"],Canceladas:["cancelado"],Todas:[]},P=["Todos",...Array.from(new Set(t.map(e=>e.uf).filter(Boolean))).sort()],D=t.filter(e=>{var t,s,a;let r="Todos"===v||e.uf===v,l=""===w||(null===(t=e.protocolo)||void 0===t?void 0:t.toLowerCase().includes(w.toLowerCase()))||(null===(s=e.pop)||void 0===s?void 0:s.toLowerCase().includes(w.toLowerCase()))||(null===(a=e.condominio)||void 0===a?void 0:a.toLowerCase().includes(w.toLowerCase())),n=L[y],o="Todas"===y||!n||n.includes(e.status.toLowerCase());return r&&l&&o}).sort((e,t)=>{let s=e=>{if(!e||"-"===e)return 0;if(e.includes("T")||e.includes("-")&&e.length>8)return new Date(e).getTime();let t=e.split("/");if(t.length<3)return 0;let[s,a,r]=t.map(Number);return new Date(r,a-1,s).getTime()};if("Conclu\xeddas"===y){let a=s(e.closedAt||e.dataConclusao);return s(t.closedAt||t.dataConclusao)-a}if("Canceladas"===y)return s(t.dataEntrante)-s(e.dataEntrante);if("Abertas"===y){let s=e=>{let t=R(e).toLowerCase();return t.includes("execu\xe7\xe3o")||t.includes("execucao")?3:"iniciar"===t?2:1},a=s(e),r=s(t);if(a!==r)return r-a}return 0}),O=Math.ceil(D.length/50),E=D.slice((M-1)*50,50*M);function R(e){if(e.executionStatus&&"Pendente"!==e.executionStatus)return e.executionStatus;let t=e.status.toLowerCase();return"conclu\xeddo"===t||"concluido"===t||"encerrada"===t?"Conclu\xedda":"cancelado"===t?"Cancelada":e.status||"Pendente"}return(0,a.jsx)("div",{className:"min-h-screen bg-slate-100 dark:bg-slate-950 pb-6 md:pb-8 space-y-6 transition-colors",children:(0,a.jsxs)("div",{className:"pt-20 px-4 md:px-8 space-y-6",children:[(0,a.jsx)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-2",children:(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"Ordens de Servi\xe7o"})})}),(0,a.jsx)(n.Zb,{className:"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 shadow-sm",children:(0,a.jsxs)(n.aY,{className:"p-4 flex flex-col md:flex-row gap-4 items-center",children:[(0,a.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,a.jsx)(i.Z,{className:"absolute left-3 top-3 h-4 w-4 text-slate-500 dark:text-slate-400"}),(0,a.jsx)(d.I,{placeholder:"Buscar por protocolo, POP ou condom\xednio...",className:"pl-9 bg-white border-slate-300 focus:bg-white transition-colors dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:focus:bg-slate-950 dark:placeholder:text-slate-400 shadow-sm",value:w,onChange:e=>{j(e.target.value),Z(1)}})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[(0,a.jsx)(u,{className:"h-4 w-4 text-muted-foreground shrink-0 hidden sm:block"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:flex items-center gap-2 w-full sm:w-auto",children:[(0,a.jsxs)("div",{className:"relative w-full sm:w-auto",children:[(0,a.jsx)("select",{value:v,onChange:e=>{var t;k(t=e.target.value),Z(1),(0,b.ex)("lastUf",t).then(()=>A.refresh())},className:"h-10 w-full sm:w-[150px] appearance-none rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 pr-8 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",children:P.map(e=>(0,a.jsx)("option",{value:e,children:"Todos"===e?"Todos os estados":e},e))}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-muted-foreground",children:(0,a.jsx)("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"})})})]}),(0,a.jsxs)("div",{className:"relative w-full sm:w-auto",children:[(0,a.jsx)("select",{value:y,onChange:e=>{var t;C(t=e.target.value),Z(1),(0,b.ex)("lastStatus",t).then(()=>A.refresh())},className:"h-10 w-full sm:w-[130px] appearance-none rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 pr-8 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",children:Object.keys(L).map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-muted-foreground",children:(0,a.jsx)("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"})})})]})]})]}),(0,a.jsxs)("div",{className:"text-sm font-medium text-muted-foreground bg-slate-100 dark:bg-slate-800 dark:text-slate-300 px-3 py-2 rounded-md whitespace-nowrap w-full sm:w-auto text-center",children:[D.length," resultados"]})]})]})}),(0,a.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:E.map(e=>(0,a.jsx)("div",{onClick:()=>{S(e.id),A.push("/os/".concat(e.id))},className:"block group h-full cursor-pointer",children:(0,a.jsxs)(n.Zb,{className:"h-full relative transition-all duration-200 hover:shadow-lg hover:-translate-y-1 hover:border-primary/50 group-hover:bg-slate-50/50 dark:group-hover:bg-slate-900/50 dark:bg-slate-950 dark:border-slate-800 flex flex-col ".concat(T===e.id?"opacity-60 pointer-events-none":""),children:[T===e.id&&(0,a.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-white/50 dark:bg-slate-950/50 rounded-xl backdrop-blur-[1px]",children:(0,a.jsx)(x.Z,{className:"h-8 w-8 animate-spin text-primary"})}),(0,a.jsx)(n.Ol,{className:"p-5 pb-3 space-y-0",children:(0,a.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1.5 flex-1",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsx)(o.C,{variant:"outline",className:"font-mono text-xs text-muted-foreground border-slate-200 dark:border-slate-700",children:e.protocolo||"SEM PROTOCOLO"}),e.uf&&(0,a.jsx)(o.C,{variant:"secondary",className:"text-[10px] h-5 px-1.5 font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:e.uf})]}),e.condominio&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5 mb-0.5 mt-1",children:[(0,a.jsx)(m,{className:"h-3.5 w-3.5 text-slate-500"}),(0,a.jsx)("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300 uppercase tracking-wide truncate",children:e.condominio})]}),(0,a.jsx)(n.ll,{className:"text-base font-bold leading-tight group-hover:text-primary transition-colors line-clamp-2 dark:text-slate-100",title:e.pop||"SEM POP",children:e.pop||"SEM POP"})]}),(0,a.jsx)(N,{label:R(e),className:"shrink-0"})]})}),(0,a.jsxs)(n.aY,{className:"p-5 pt-2 flex-1 flex flex-col justify-end space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground bg-slate-50/80 dark:bg-slate-900/50 p-2 rounded-md border border-slate-100/50 dark:border-slate-800/50",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 text-slate-400 shrink-0"}),(0,a.jsxs)("span",{className:"font-medium text-slate-600 dark:text-slate-400",children:[e.totalCaixas," caixas"]})]}),e.cenario&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground px-2",children:[(0,a.jsx)(h.Z,{className:"h-3.5 w-3.5 text-slate-400 shrink-0"}),(0,a.jsx)("span",{className:"truncate text-xs",children:e.cenario})]}),e.equipeName&&(0,a.jsx)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground px-2",children:(0,a.jsxs)("span",{className:"text-xs",children:["\uD83D\uDC64 ",e.equipeName]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-3 border-t border-slate-100 dark:border-slate-800 text-xs mt-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block text-muted-foreground/60 mb-0.5 text-[10px] uppercase font-bold tracking-wider",children:"Entrada"}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 font-medium text-slate-700 dark:text-slate-300",children:[(0,a.jsx)(p,{className:"h-3 w-3 text-slate-400"}),e.dataEntrante]})]}),"Conclu\xedda"===R(e)?(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block text-muted-foreground/60 mb-0.5 text-[10px] uppercase font-bold tracking-wider",children:"Conclus\xe3o"}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 font-medium text-slate-700 dark:text-slate-300",children:[(0,a.jsx)(p,{className:"h-3 w-3 text-slate-400"}),e.closedAt?e.closedAt.includes("T")?new Date(e.closedAt).toLocaleDateString("pt-BR"):e.closedAt:e.dataConclusao||"-"]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block text-muted-foreground/60 mb-0.5 text-[10px] uppercase font-bold tracking-wider",children:"Prazo"}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 font-medium ".concat(function(e){if(!e||"-"===e)return"text-slate-700 dark:text-slate-300";let[t,s,a]=e.split("/").map(Number),r=new Date(a,s-1,t),l=new Date,n=new Date(r.getFullYear(),r.getMonth(),r.getDate()),o=new Date(l.getFullYear(),l.getMonth(),l.getDate());return n.getTime()<o.getTime()?"text-rose-600 dark:text-rose-400":n.getTime()===o.getTime()?"text-amber-600 dark:text-amber-400":"text-slate-700 dark:text-slate-300"}(e.dataPrevExec)),children:[(0,a.jsx)(p,{className:"h-3 w-3 text-slate-400"}),e.dataPrevExec]})]})]})]})]})},e.id))}),O>1&&(0,a.jsx)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 py-6 border-t border-slate-200 dark:border-slate-800 mt-8",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>Z(e=>Math.max(1,e-1)),disabled:1===M,className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 hover:bg-slate-100 dark:hover:bg-slate-800 h-10 px-4 py-2 text-slate-900 dark:text-slate-100",children:"Anterior"}),(0,a.jsxs)("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 px-4",children:["P\xe1gina ",M," de ",O]}),(0,a.jsx)("button",{onClick:()=>Z(e=>Math.min(O,e+1)),disabled:M===O,className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 hover:bg-slate-100 dark:hover:bg-slate-800 h-10 px-4 py-2 text-slate-900 dark:text-slate-100",children:"Pr\xf3ximo"})]})}),0===D.length&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-muted-foreground bg-white dark:bg-slate-900 rounded-lg border border-dashed border-slate-300 dark:border-slate-800",children:[(0,a.jsx)("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-full mb-4",children:(0,a.jsx)(i.Z,{className:"h-8 w-8 text-slate-300 dark:text-slate-600"})}),(0,a.jsx)("p",{className:"text-xl font-semibold text-slate-700 dark:text-slate-200",children:"Nenhum resultado encontrado"}),(0,a.jsx)("p",{className:"text-sm mt-1 mb-6 max-w-sm text-center text-muted-foreground",children:"N\xe3o encontramos nenhuma OS com os filtros atuais. Tente buscar por outro termo ou limpar os filtros."}),(0,a.jsx)("button",{onClick:()=>{j(""),k("Todos")},className:"text-primary hover:underline font-medium",children:"Limpar filtros"})]})]})})}},3277:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var a=s(3827);s(4090);var r=s(2169);function l(e){let{className:t,variant:s="default",...l}=e;return(0,a.jsx)("div",{className:(0,r.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-emerald-500/50 bg-transparent text-emerald-600 dark:text-emerald-400 dark:border-emerald-500/30",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600",orange:"border-transparent bg-orange-500 text-white hover:bg-orange-600","light-green":"border-emerald-500/30 bg-transparent text-emerald-600 dark:text-emerald-400/80 dark:border-emerald-500/20"}[s],t),...l})}},5671:function(e,t,s){"use strict";s.d(t,{Ol:function(){return o},SZ:function(){return i},Zb:function(){return n},aY:function(){return c},eW:function(){return u},ll:function(){return d}});var a=s(3827),r=s(4090),l=s(2169);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});n.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});o.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});d.displayName="CardTitle";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});i.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},2782:function(e,t,s){"use strict";s.d(t,{I:function(){return n}});var a=s(3827),r=s(4090),l=s(2169);let n=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-11 w-full rounded-md border border-input bg-background px-4 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all",s),ref:t,...n})});n.displayName="Input"}},function(e){e.O(0,[55,380,861,971,69,744],function(){return e(e.s=133)}),_N_E=e.O()}]);