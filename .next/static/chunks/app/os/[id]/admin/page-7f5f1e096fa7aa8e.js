(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[919],{7548:function(e,s,a){Promise.resolve().then(a.t.bind(a,5250,23)),Promise.resolve().then(a.bind(a,7263)),Promise.resolve().then(a.bind(a,4861))},699:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(4999).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},2235:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(4999).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7263:function(e,s,a){"use strict";a.r(s),a.d(s,{OSAdminEditForm:function(){return h}});var t=a(3827),r=a(4090),l=a(7907),n=a(575),i=a(2782),d=a(3549);a(5355);var o=(0,a(3472).$)("2e97a5facdd95a76e159016de9c21bb65bbde3ff"),c=a(4999);let u=(0,c.Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),m=(0,c.Z)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);var x=a(2235),p=a(699),f=a(6288);function h(e){let{osId:s,initialData:a}=e,[c,h]=(0,r.useState)(!1),[b,v]=(0,r.useState)((null==a?void 0:a.condominio)||""),[g,N]=(0,r.useState)((null==a?void 0:a.descricao)||""),[j,k]=(0,r.useState)([]),[y,w]=(0,r.useState)((null==a?void 0:a.attachments)||[]),[z,C]=(0,r.useState)([]),S=(0,l.useRouter)(),Z=e=>{k(s=>s.filter((s,a)=>a!==e))},E=e=>{w(s=>s.filter(s=>s.id!==e)),C(s=>[...s,e])},I=async e=>{e.preventDefault(),h(!0);let a=new FormData;a.append("osId",s),a.append("condominio",b),a.append("descricao",g),j.forEach(e=>{a.append("files",e)}),z.forEach(e=>{a.append("deletedFileIds",e)});let t=await o(a);t.success?(f.Am.success("Informa\xe7\xf5es atualizadas com sucesso!"),S.push("/os/".concat(s)),S.refresh()):(f.Am.error(t.message||"Erro ao salvar informa\xe7\xf5es."),h(!1))};return(0,t.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Nome do Condom\xednio"}),(0,t.jsx)(i.I,{value:b,onChange:e=>v(e.target.value),placeholder:"Ex: Condom\xednio Garden Park"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Descri\xe7\xe3o / Observa\xe7\xf5es"}),(0,t.jsx)(d.g,{value:g,onChange:e=>N(e.target.value),placeholder:"Informa\xe7\xf5es adicionais para a equipe...",className:"h-40 resize-y"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Anexos"}),(0,t.jsxs)("div",{className:"border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-xl p-6 text-center hover:bg-slate-50/50 dark:hover:bg-slate-800/50 transition-colors relative group",children:[(0,t.jsx)("input",{type:"file",multiple:!0,className:"absolute inset-0 opacity-0 cursor-pointer z-10",onChange:e=>{e.target.files&&k(s=>[...s,...Array.from(e.target.files||[])])}}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)("div",{className:"p-3 bg-slate-100 dark:bg-slate-800 rounded-full group-hover:bg-slate-200 dark:group-hover:bg-slate-700 transition-colors",children:(0,t.jsx)(u,{className:"h-6 w-6 text-slate-500 dark:text-slate-400"})}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"Clique para fazer upload"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"ou arraste e solte arquivos aqui"})]})]})]}),(y.length>0||j.length>0)&&(0,t.jsxs)("div",{className:"space-y-2 mt-4",children:[y.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-800",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[(0,t.jsx)(m,{className:"h-4 w-4 text-slate-400 shrink-0"}),(0,t.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 truncate",children:e.name}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[(e.size/1024).toFixed(0)," KB"]})]})]}),(0,t.jsx)(n.z,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950/30",onClick:()=>E(e.id),children:(0,t.jsx)(x.Z,{className:"h-4 w-4"})})]},e.id)),j.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50/50 dark:bg-blue-950/20 rounded-lg border border-blue-100 dark:border-blue-900/30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[(0,t.jsx)(u,{className:"h-4 w-4 text-blue-500 shrink-0"}),(0,t.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 truncate",children:e.name}),(0,t.jsx)("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Novo arquivo"})]})]}),(0,t.jsx)(n.z,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",onClick:()=>Z(s),children:(0,t.jsx)(x.Z,{className:"h-4 w-4"})})]},s))]})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4",children:(0,t.jsx)(n.z,{type:"submit",disabled:c,className:"min-w-[140px] bg-blue-600 hover:bg-blue-700 text-white shadow-sm",size:"lg",children:c?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Salvando..."]}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4"}),"Salvar Altera\xe7\xf5es"]})})})]})}},2782:function(e,s,a){"use strict";a.d(s,{I:function(){return n}});var t=a(3827),r=a(4090),l=a(2169);let n=r.forwardRef((e,s)=>{let{className:a,type:r,...n}=e;return(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-11 w-full rounded-md border border-input bg-background px-4 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all",a),ref:s,...n})});n.displayName="Input"},3549:function(e,s,a){"use strict";a.d(s,{g:function(){return n}});var t=a(3827),r=a(4090),l=a(2169);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-4 py-3 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...r})});n.displayName="Textarea"}},function(e){e.O(0,[55,380,288,861,971,69,744],function(){return e(e.s=7548)}),_N_E=e.O()}]);