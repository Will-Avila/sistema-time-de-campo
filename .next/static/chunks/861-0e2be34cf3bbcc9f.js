"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[861],{1293:function(e,t,a){a.d(t,{k:function(){return r},x:function(){return n}}),a(5355);var s=a(3472),r=(0,s.$)("4f7cc3295bc1862da856a082439e474acd72ddb0"),n=(0,s.$)("bbec7576f1f50640a4a678e3194e37400ea45963")},3204:function(e,t,a){a.d(t,{XP:function(){return d},ck:function(){return r},ex:function(){return n},jt:function(){return l},kj:function(){return c}}),a(5355);var s=a(3472),r=(0,s.$)("bb9004a81e2ec4420b2b97debd5f27e567e92ef6"),n=(0,s.$)("c5f7132601121f48314d1a51ecac279117f08ff6"),l=(0,s.$)("3a7a815bcde402ec80a76d4915ddaa24dd2697a6"),d=(0,s.$)("c98ca564b4813ac5836f5e16d8b41e62d1cf9860"),c=(0,s.$)("e0bf2b8da39f29f7764053adebc46527dec3237e");(0,s.$)("2dd604a4fa171d5bf4edd119607f12882f2f1233")},4861:function(e,t,a){a.r(t),a.d(t,{Header:function(){return C}});var s=a(3827),r=a(4090),n=a(1213),l=a(9744),d=a(1047),c=a(2891),o=a(4178),i=a(5423),u=a(1049),x=a(575),m=a(1293),f=a(3204),h=a(8792),b=a(4848),g=a(7907),p=a(3345),v=a(9259);a(5355);var j=a(3472),N=(0,j.$)("a097c09bcedad3830c63ef8bf1297807d0616abc");(0,j.$)("22c53d6cc54bce46a621cc2c18c29a4b6151f7eb");var k=(0,j.$)("84b4112fe213bb4e51d524390b924583a28cf4a6"),y=(0,j.$)("531833ed2258d48c2a40d41cd7d226d4ccc024cc");function w(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!1),[l,d]=(0,r.useState)(!0),c=(0,g.useRouter)(),o=async()=>{t(await k()),d(!1)};(0,r.useEffect)(()=>{o();let e=setInterval(o,3e4);return()=>clearInterval(e)},[]);let i=async e=>{t(t=>t.filter(t=>t.id!==e)),await y(e)},u=async()=>{let a=[...e];t([]),(await N()).success||t(a),n(!1)},m=e.length;return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)(x.z,{variant:"ghost",size:"icon",className:"relative text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>n(!a),children:[(0,s.jsx)(p.Z,{className:"h-5 w-5"}),m>0&&(0,s.jsx)("span",{className:"absolute top-2 right-2 h-2.5 w-2.5 rounded-full bg-red-500 ring-2 ring-white dark:ring-slate-950 animate-pulse"})]}),a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),(0,s.jsxs)("div",{className:"absolute right-0 top-12 w-80 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 shadow-xl rounded-lg overflow-hidden z-50 animate-in fade-in zoom-in-95 duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50",children:[(0,s.jsx)("h4",{className:"font-semibold text-sm text-slate-900 dark:text-slate-100",children:"Notifica\xe7\xf5es"}),m>0&&(0,s.jsx)("button",{className:"text-xs text-primary hover:opacity-80 font-medium transition-colors",onClick:u,children:"Marcar todas como lidas"})]}),(0,s.jsx)("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar",children:l&&0===e.length?(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"animate-spin h-5 w-5 border-2 border-slate-300 border-t-primary rounded-full mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Carregando..."})]}):0===e.length?(0,s.jsxs)("div",{className:"p-12 text-center text-slate-500",children:[(0,s.jsx)(p.Z,{className:"h-8 w-8 mx-auto mb-3 opacity-20"}),(0,s.jsx)("p",{className:"text-sm",children:"Nenhuma notifica\xe7\xe3o nova"})]}):(0,s.jsx)("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:e.map(e=>(0,s.jsx)("div",{onClick:()=>{e.osId&&(i(e.id),c.push("/os/".concat(e.osId)),n(!1))},className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors relative group ".concat(e.osId?"cursor-pointer":""),children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{className:"mt-1.5 h-2 w-2 rounded-full shrink-0 ".concat("OS_CLOSE"===e.type?"bg-blue-500":"NEW_OS"===e.type?"bg-emerald-500":"bg-amber-500")}),(0,s.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium leading-none text-slate-900 dark:text-slate-100",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 line-clamp-2 leading-relaxed",children:e.message}),(0,s.jsx)("p",{className:"text-[10px] text-slate-400 font-medium",children:function(e){let t=new Date,a=new Date(e),s=Math.floor((t.getTime()-a.getTime())/1e3);if(s<60)return"agora mesmo";let r=Math.floor(s/60);if(r<60)return"h\xe1 ".concat(r," min");let n=Math.floor(r/60);if(n<24)return"h\xe1 ".concat(n,"h");let l=Math.floor(n/24);return l<7?"h\xe1 ".concat(l,"d"):a.toLocaleDateString("pt-BR")}(e.createdAt)})]}),(0,s.jsx)("button",{className:"h-6 w-6 flex items-center justify-center rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-400 hover:text-primary transition-colors opacity-0 group-hover:opacity-100",onClick:t=>{t.stopPropagation(),i(e.id)},title:"Marcar como lida",children:(0,s.jsx)(v.Z,{className:"h-3 w-3"})})]})},e.id))})})]})]})]})}function C(e){let{username:t,initialTheme:a,isAdmin:g}=e,[p,v]=(0,r.useState)(!1),{theme:j,setTheme:N}=(0,b.F)(),[k,y]=(0,r.useState)(!1),C=t.split(" ")[0];async function Z(){let e="dark"===j?"light":"dark";N(e),await (0,f.ex)("theme",e)}return(0,r.useEffect)(()=>{y(!0),a&&N(a)},[a,N]),(0,s.jsxs)("header",{className:"fixed top-0 left-0 right-0 h-16 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 shadow-sm z-50 px-4 flex items-center justify-between transition-colors",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(h.default,{href:"/os",className:"text-xl font-bold tracking-tighter text-primary",children:"X-ON"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-slate-700 dark:text-slate-200",children:[(0,s.jsxs)("span",{className:"font-medium text-sm hidden md:inline-block",children:["Ol\xe1, ",C]}),(0,s.jsx)("span",{className:"font-medium text-sm md:hidden",children:C}),(0,s.jsx)("div",{className:"bg-primary/10 dark:bg-primary/20 p-1.5 rounded-full text-primary",children:(0,s.jsx)(n.Z,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"flex-1 flex justify-end items-center gap-2 relative",children:[(0,s.jsx)(w,{}),(0,s.jsx)(x.z,{variant:"ghost",size:"icon",onClick:()=>v(!p),className:"text-slate-600 dark:text-slate-300 hover:text-primary hover:bg-primary/10",children:(0,s.jsx)(l.Z,{className:"h-6 w-6"})}),p&&(0,s.jsxs)("div",{className:"absolute top-12 right-0 w-52 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 shadow-lg rounded-lg overflow-hidden animate-in fade-in slide-in-from-top-2 p-1",children:[(0,s.jsxs)("button",{type:"button",onClick:Z,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-md transition-colors text-left",children:[k?"dark"===j?(0,s.jsx)(d.Z,{className:"h-4 w-4 text-amber-500"}):(0,s.jsx)(c.Z,{className:"h-4 w-4 text-indigo-500"}):(0,s.jsx)("div",{className:"h-4 w-4 animate-pulse bg-slate-200 dark:bg-slate-700 rounded-full"}),k?"dark"===j?"Modo Claro":"Modo Escuro":"Carregando..."]}),(0,s.jsx)("div",{className:"border-t border-slate-100 dark:border-slate-700 my-1"}),(0,s.jsxs)(h.default,{href:"/os",className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-md transition-colors",onClick:()=>v(!1),children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 text-blue-600"}),"Ordens de Servi\xe7o"]}),g&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"border-t border-slate-100 dark:border-slate-700 my-1"}),(0,s.jsxs)(h.default,{href:"/admin/dashboard",className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-md transition-colors",onClick:()=>v(!1),children:[(0,s.jsx)(i.Z,{className:"h-4 w-4 text-primary"}),"Dashboard"]})]}),(0,s.jsx)("div",{className:"border-t border-slate-100 dark:border-slate-700 my-1"}),(0,s.jsxs)(h.default,{href:"/profile",className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-md transition-colors",onClick:()=>v(!1),children:[(0,s.jsx)(n.Z,{className:"h-4 w-4 text-slate-500 dark:text-slate-400"}),"Editar Perfil"]}),(0,s.jsx)("div",{className:"border-t border-slate-100 dark:border-slate-700 my-1"}),(0,s.jsx)("form",{action:async()=>{await (0,m.k)()},children:(0,s.jsxs)("button",{type:"submit",className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors text-left",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),"Sair"]})})]})]}),p&&(0,s.jsx)("div",{className:"fixed inset-0 z-[-1]",onClick:()=>v(!1)})]})}},575:function(e,t,a){a.d(t,{z:function(){return l}});var s=a(3827),r=a(4090),n=a(2169);let l=r.forwardRef((e,t)=>{let{className:a,variant:r="default",size:l="default",...d}=e;return(0,s.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"}[r],{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[l],a),ref:t,...d})});l.displayName="Button"},2169:function(e,t,a){a.d(t,{A:function(){return u},cn:function(){return o},x:function(){return i}});var s=a(3167),r=a(1367),n=a(9724),l=a(4187),d=a(6490),c=a(7913);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}function i(e){let{osStatus:t,execution:a}=e,s=(t||"").toLowerCase(),r="conclu\xeddo"===s||"concluido"===s||"encerrada"===s,o="em execu\xe7\xe3o"===s||"em execucao"===s,i=t||"Pendente",u="secondary",x=n.Z;if(a){let e="Conclu\xedda";if(a.obs){let t=a.obs.match(/Status: (.*?)\n/);t&&t[1]?e=t[1]:a.obs.includes("Sem Execu\xe7\xe3o")&&(e="Sem Execu\xe7\xe3o")}"encerrada"===s||"conclu\xeddo"===s||"concluido"===s?(u=(i=e).includes("Sem Execu\xe7\xe3o")?"destructive":"success",x=l.Z):"DONE"===a.status?(u=(i="".concat(e," - Em an\xe1lise")).includes("Sem Execu\xe7\xe3o")?"orange":"light-green",x=d.Z):"PENDING"===a.status||o?(i="Em execu\xe7\xe3o",u="warning",x=c.Z):r&&(i="Conclu\xedda",u="success",x=l.Z)}else o?(i="Em execu\xe7\xe3o",u="warning",x=c.Z):r?(i="Conclu\xedda",u="success",x=l.Z):"cancelado"===s&&(i="Cancelada",u="destructive",x=n.Z);return{label:i,variant:u,icon:x}}function u(e){let t=(e||"").toLowerCase();return"conclu\xedda"===t||"concluida"===t?"success":"sem execu\xe7\xe3o"===t||"cancelada"===t?"destructive":"em execu\xe7\xe3o"===t||"em execucao"===t?"warning":t.includes("sem execu\xe7\xe3o - em an\xe1lise")||t.includes("sem execucao - em analise")?"orange":t.includes("em an\xe1lise")||t.includes("em analise")?"light-green":"secondary"}}}]);