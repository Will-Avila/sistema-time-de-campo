(()=>{var e={};e.id=800,e.ids=[800],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},91852:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>l});var s=t(50482),r=t(69108),i=t(62563),d=t.n(i),n=t(68300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(a,o);let l=["",{children:["os",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,19414)),"C:\\Programas\\PROJETOS\\sistema-time-de-campo\\src\\app\\os\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,49223)),"C:\\Programas\\PROJETOS\\sistema-time-de-campo\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,92793)),"C:\\Programas\\PROJETOS\\sistema-time-de-campo\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Programas\\PROJETOS\\sistema-time-de-campo\\src\\app\\os\\page.tsx"],u="/os/page",m={require:t,loadChunk:()=>Promise.resolve()},f=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/os/page",pathname:"/os",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},9618:(e,a,t)=>{let s={"2dd604a4fa171d5bf4edd119607f12882f2f1233":()=>Promise.resolve().then(t.bind(t,13398)).then(e=>e.getEquipes),"3a7a815bcde402ec80a76d4915ddaa24dd2697a6":()=>Promise.resolve().then(t.bind(t,13398)).then(e=>e.createEquipe),bb9004a81e2ec4420b2b97debd5f27e567e92ef6:()=>Promise.resolve().then(t.bind(t,13398)).then(e=>e.updateProfile),c5f7132601121f48314d1a51ecac279117f08ff6:()=>Promise.resolve().then(t.bind(t,13398)).then(e=>e.updatePreferences),c98ca564b4813ac5836f5e16d8b41e62d1cf9860:()=>Promise.resolve().then(t.bind(t,13398)).then(e=>e.deleteEquipe),e0bf2b8da39f29f7764053adebc46527dec3237e:()=>Promise.resolve().then(t.bind(t,13398)).then(e=>e.updateEquipe),"4f7cc3295bc1862da856a082439e474acd72ddb0":()=>Promise.resolve().then(t.bind(t,67778)).then(e=>e.logout),bbec7576f1f50640a4a678e3194e37400ea45963:()=>Promise.resolve().then(t.bind(t,67778)).then(e=>e.login),"22c53d6cc54bce46a621cc2c18c29a4b6151f7eb":()=>Promise.resolve().then(t.bind(t,36051)).then(e=>e.createNotification),"531833ed2258d48c2a40d41cd7d226d4ccc024cc":()=>Promise.resolve().then(t.bind(t,36051)).then(e=>e.markAsRead),"84b4112fe213bb4e51d524390b924583a28cf4a6":()=>Promise.resolve().then(t.bind(t,36051)).then(e=>e.getUnreadNotifications),a097c09bcedad3830c63ef8bf1297807d0616abc:()=>Promise.resolve().then(t.bind(t,36051)).then(e=>e.markAllAsRead)};async function r(e,...a){return(await s[e]()).apply(null,a)}e.exports={"2dd604a4fa171d5bf4edd119607f12882f2f1233":r.bind(null,"2dd604a4fa171d5bf4edd119607f12882f2f1233"),"3a7a815bcde402ec80a76d4915ddaa24dd2697a6":r.bind(null,"3a7a815bcde402ec80a76d4915ddaa24dd2697a6"),bb9004a81e2ec4420b2b97debd5f27e567e92ef6:r.bind(null,"bb9004a81e2ec4420b2b97debd5f27e567e92ef6"),c5f7132601121f48314d1a51ecac279117f08ff6:r.bind(null,"c5f7132601121f48314d1a51ecac279117f08ff6"),c98ca564b4813ac5836f5e16d8b41e62d1cf9860:r.bind(null,"c98ca564b4813ac5836f5e16d8b41e62d1cf9860"),e0bf2b8da39f29f7764053adebc46527dec3237e:r.bind(null,"e0bf2b8da39f29f7764053adebc46527dec3237e"),"4f7cc3295bc1862da856a082439e474acd72ddb0":r.bind(null,"4f7cc3295bc1862da856a082439e474acd72ddb0"),bbec7576f1f50640a4a678e3194e37400ea45963:r.bind(null,"bbec7576f1f50640a4a678e3194e37400ea45963"),"22c53d6cc54bce46a621cc2c18c29a4b6151f7eb":r.bind(null,"22c53d6cc54bce46a621cc2c18c29a4b6151f7eb"),"531833ed2258d48c2a40d41cd7d226d4ccc024cc":r.bind(null,"531833ed2258d48c2a40d41cd7d226d4ccc024cc"),"84b4112fe213bb4e51d524390b924583a28cf4a6":r.bind(null,"84b4112fe213bb4e51d524390b924583a28cf4a6"),a097c09bcedad3830c63ef8bf1297807d0616abc:r.bind(null,"a097c09bcedad3830c63ef8bf1297807d0616abc")}},94936:(e,a,t)=>{let s={"01aa194246fb3cd3909854170a6a003e66db9b89":()=>Promise.resolve().then(t.bind(t,55379)).then(e=>e.getSession),"6025ca35376357c0da7f5b807633b24af797ac4b":()=>Promise.resolve().then(t.bind(t,55379)).then(e=>e.clearSessionCookie),"7f6832b04b751148a6382dd64a1cc223449e53b3":()=>Promise.resolve().then(t.bind(t,55379)).then(e=>e.requireAuth),"8d8f3bd62d0a07b2792f9104701a5c0433fbcdee":()=>Promise.resolve().then(t.bind(t,55379)).then(e=>e.requireAdmin),bbad0871288a94d710af6fbd6788ce5f0465e0e3:()=>Promise.resolve().then(t.bind(t,55379)).then(e=>e.createToken),bdb6b21ecc9aab6757183c887af3cd3c576bd3b3:()=>Promise.resolve().then(t.bind(t,55379)).then(e=>e.setSessionCookie)};async function r(e,...a){return(await s[e]()).apply(null,a)}e.exports={"01aa194246fb3cd3909854170a6a003e66db9b89":r.bind(null,"01aa194246fb3cd3909854170a6a003e66db9b89"),"6025ca35376357c0da7f5b807633b24af797ac4b":r.bind(null,"6025ca35376357c0da7f5b807633b24af797ac4b"),"7f6832b04b751148a6382dd64a1cc223449e53b3":r.bind(null,"7f6832b04b751148a6382dd64a1cc223449e53b3"),"8d8f3bd62d0a07b2792f9104701a5c0433fbcdee":r.bind(null,"8d8f3bd62d0a07b2792f9104701a5c0433fbcdee"),bbad0871288a94d710af6fbd6788ce5f0465e0e3:r.bind(null,"bbad0871288a94d710af6fbd6788ce5f0465e0e3"),bdb6b21ecc9aab6757183c887af3cd3c576bd3b3:r.bind(null,"bdb6b21ecc9aab6757183c887af3cd3c576bd3b3")}},96697:(e,a,t)=>{Promise.resolve().then(t.bind(t,89310)),Promise.resolve().then(t.bind(t,85740))},84292:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(51091).Z)("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},56389:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(51091).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},80508:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(51091).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},28765:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(51091).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},89310:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>k});var s=t(95344),r=t(3729),i=t(8428),d=t(23673),n=t(19591),o=t(46540),l=t(28765),c=t(51091);let u=(0,c.Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var m=t(56389);let f=(0,c.Z)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);var p=t(84292),b=t(80508);let x=(0,c.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var h=t(357),g=t(11453),v=t(65719),w=t(66262),y=t(25545),N=t(88737);function j({label:e,osStatus:a,execution:t,className:r,showIcon:i=!0}){let d=e,o="secondary",l=v.Z;if(e){d=e,o=(0,g.A)(e);let a=e.toLowerCase();a.includes("conclu\xed")||a.includes("conclui")||a.includes("encerrada")?l=w.Z:a.includes("an\xe1lise")||a.includes("analise")?l=y.Z:(a.includes("execu\xe7\xe3o")||a.includes("execucao"))&&(l=N.Z)}else if(void 0!==a){let e=(0,g.x)({osStatus:a,execution:t});d=e.label,o=e.variant,l=e.icon}return(0,s.jsxs)(n.C,{variant:o,className:r,children:[i&&s.jsx(l,{className:"mr-1.5 h-3.5 w-3.5"}),d]})}function k({initialOSList:e,initialUf:a,initialSearch:t,initialStatus:c}){let[g,v]=(0,r.useState)(a||"Todos"),[w,y]=(0,r.useState)(t||""),[N,k]=(0,r.useState)(c||"Abertas"),[P,q]=(0,r.useState)(1),[E,C]=(0,r.useState)(null),A=(0,i.useRouter)();(0,r.useEffect)(()=>{let e=setTimeout(()=>{w!==(t||"")&&(0,h.ex)("lastSearch",w).then(()=>A.refresh())},500);return()=>clearTimeout(e)},[w,t,A]);let S={Abertas:["iniciar","em execu\xe7\xe3o","em execucao","pend. cliente","conclu\xedda - em an\xe1lise","sem execu\xe7\xe3o - em an\xe1lise"],ConcluÃ­das:["conclu\xeddo","concluido","encerrada","conclu\xedda"],Canceladas:["cancelado"],Todas:[]},M=["Todos",...Array.from(new Set(e.map(e=>e.uf).filter(Boolean))).sort()],O=e.filter(e=>{let a="Todos"===g||e.uf===g,t=""===w||e.protocolo?.toLowerCase().includes(w.toLowerCase())||e.pop?.toLowerCase().includes(w.toLowerCase())||e.condominio?.toLowerCase().includes(w.toLowerCase()),s=S[N],r="Todas"===N||!s||s.includes(e.status.toLowerCase());return a&&t&&r}).sort((e,a)=>{let t=e=>{if(!e||"-"===e)return 0;if(e.includes("T")||e.includes("-")&&e.length>8)return new Date(e).getTime();let a=e.split("/");if(a.length<3)return 0;let[t,s,r]=a.map(Number);return new Date(r,s-1,t).getTime()};if("Conclu\xeddas"===N){let s=t(e.closedAt||e.dataConclusao);return t(a.closedAt||a.dataConclusao)-s}if("Canceladas"===N)return t(a.dataEntrante)-t(e.dataEntrante);if("Abertas"===N){let t=e=>{let a=z(e).toLowerCase();return a.includes("execu\xe7\xe3o")||a.includes("execucao")?3:"iniciar"===a?2:1},s=t(e),r=t(a);if(s!==r)return r-s}return 0}),T=Math.ceil(O.length/50),Z=O.slice((P-1)*50,50*P);function z(e){if(e.executionStatus&&"Pendente"!==e.executionStatus)return e.executionStatus;let a=e.status.toLowerCase();return"conclu\xeddo"===a||"concluido"===a||"encerrada"===a?"Conclu\xedda":"cancelado"===a?"Cancelada":e.status||"Pendente"}return s.jsx("div",{className:"min-h-screen bg-slate-100 dark:bg-slate-950 pb-6 md:pb-8 space-y-6 transition-colors",children:(0,s.jsxs)("div",{className:"pt-20 px-4 md:px-8 space-y-6",children:[s.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-2",children:s.jsx("div",{children:s.jsx("h1",{className:"text-3xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"Ordens de Servi\xe7o"})})}),s.jsx(d.Zb,{className:"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 shadow-sm",children:(0,s.jsxs)(d.aY,{className:"p-4 flex flex-col md:flex-row gap-4 items-center",children:[(0,s.jsxs)("div",{className:"relative flex-1 w-full",children:[s.jsx(l.Z,{className:"absolute left-3 top-3 h-4 w-4 text-slate-500 dark:text-slate-400"}),s.jsx(o.I,{placeholder:"Buscar por protocolo, POP ou condom\xednio...",className:"pl-9 bg-white border-slate-300 focus:bg-white transition-colors dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:focus:bg-slate-950 dark:placeholder:text-slate-400 shadow-sm",value:w,onChange:e=>{y(e.target.value),q(1)}})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[s.jsx(u,{className:"h-4 w-4 text-muted-foreground shrink-0 hidden sm:block"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:flex items-center gap-2 w-full sm:w-auto",children:[(0,s.jsxs)("div",{className:"relative w-full sm:w-auto",children:[s.jsx("select",{value:g,onChange:e=>{var a;v(a=e.target.value),q(1),(0,h.ex)("lastUf",a).then(()=>A.refresh())},className:"h-10 w-full sm:w-[150px] appearance-none rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 pr-8 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",children:M.map(e=>s.jsx("option",{value:e,children:"Todos"===e?"Todos os estados":e},e))}),s.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-muted-foreground",children:s.jsx("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"})})})]}),(0,s.jsxs)("div",{className:"relative w-full sm:w-auto",children:[s.jsx("select",{value:N,onChange:e=>{var a;k(a=e.target.value),q(1),(0,h.ex)("lastStatus",a).then(()=>A.refresh())},className:"h-10 w-full sm:w-[130px] appearance-none rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 pr-8 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",children:Object.keys(S).map(e=>s.jsx("option",{value:e,children:e},e))}),s.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-muted-foreground",children:s.jsx("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"})})})]})]})]}),(0,s.jsxs)("div",{className:"text-sm font-medium text-muted-foreground bg-slate-100 dark:bg-slate-800 dark:text-slate-300 px-3 py-2 rounded-md whitespace-nowrap w-full sm:w-auto text-center",children:[O.length," resultados"]})]})]})}),s.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Z.map(e=>s.jsx("div",{onClick:()=>{C(e.id),A.push(`/os/${e.id}`)},className:"block group h-full cursor-pointer",children:(0,s.jsxs)(d.Zb,{className:`h-full relative transition-all duration-200 hover:shadow-lg hover:-translate-y-1 hover:border-primary/50 group-hover:bg-slate-50/50 dark:group-hover:bg-slate-900/50 dark:bg-slate-950 dark:border-slate-800 flex flex-col ${E===e.id?"opacity-60 pointer-events-none":""}`,children:[E===e.id&&s.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-white/50 dark:bg-slate-950/50 rounded-xl backdrop-blur-[1px]",children:s.jsx(m.Z,{className:"h-8 w-8 animate-spin text-primary"})}),s.jsx(d.Ol,{className:"p-5 pb-3 space-y-0",children:(0,s.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5 flex-1",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx(n.C,{variant:"outline",className:"font-mono text-xs text-muted-foreground border-slate-200 dark:border-slate-700",children:e.protocolo||"SEM PROTOCOLO"}),e.uf&&s.jsx(n.C,{variant:"secondary",className:"text-[10px] h-5 px-1.5 font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:e.uf})]}),e.condominio&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 mb-0.5 mt-1",children:[s.jsx(f,{className:"h-3.5 w-3.5 text-slate-500"}),s.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300 uppercase tracking-wide truncate",children:e.condominio})]}),s.jsx(d.ll,{className:"text-base font-bold leading-tight group-hover:text-primary transition-colors line-clamp-2 dark:text-slate-100",title:e.pop||"SEM POP",children:e.pop||"SEM POP"})]}),s.jsx(j,{label:z(e),className:"shrink-0"})]})}),(0,s.jsxs)(d.aY,{className:"p-5 pt-2 flex-1 flex flex-col justify-end space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground bg-slate-50/80 dark:bg-slate-900/50 p-2 rounded-md border border-slate-100/50 dark:border-slate-800/50",children:[s.jsx(p.Z,{className:"h-4 w-4 text-slate-400 shrink-0"}),(0,s.jsxs)("span",{className:"font-medium text-slate-600 dark:text-slate-400",children:[e.totalCaixas," caixas"]})]}),e.cenario&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground px-2",children:[s.jsx(b.Z,{className:"h-3.5 w-3.5 text-slate-400 shrink-0"}),s.jsx("span",{className:"truncate text-xs",children:e.cenario})]}),e.equipeName&&s.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground px-2",children:(0,s.jsxs)("span",{className:"text-xs",children:["\uD83D\uDC64 ",e.equipeName]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-3 border-t border-slate-100 dark:border-slate-800 text-xs mt-auto",children:[(0,s.jsxs)("div",{children:[s.jsx("span",{className:"block text-muted-foreground/60 mb-0.5 text-[10px] uppercase font-bold tracking-wider",children:"Entrada"}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 font-medium text-slate-700 dark:text-slate-300",children:[s.jsx(x,{className:"h-3 w-3 text-slate-400"}),e.dataEntrante]})]}),"Conclu\xedda"===z(e)?(0,s.jsxs)("div",{children:[s.jsx("span",{className:"block text-muted-foreground/60 mb-0.5 text-[10px] uppercase font-bold tracking-wider",children:"Conclus\xe3o"}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 font-medium text-slate-700 dark:text-slate-300",children:[s.jsx(x,{className:"h-3 w-3 text-slate-400"}),e.closedAt?e.closedAt.includes("T")?new Date(e.closedAt).toLocaleDateString("pt-BR"):e.closedAt:e.dataConclusao||"-"]})]}):(0,s.jsxs)("div",{children:[s.jsx("span",{className:"block text-muted-foreground/60 mb-0.5 text-[10px] uppercase font-bold tracking-wider",children:"Prazo"}),(0,s.jsxs)("div",{className:`flex items-center gap-1.5 font-medium ${function(e){if(!e||"-"===e)return"text-slate-700 dark:text-slate-300";let[a,t,s]=e.split("/").map(Number),r=new Date(s,t-1,a),i=new Date,d=new Date(r.getFullYear(),r.getMonth(),r.getDate()),n=new Date(i.getFullYear(),i.getMonth(),i.getDate());return d.getTime()<n.getTime()?"text-rose-600 dark:text-rose-400":d.getTime()===n.getTime()?"text-amber-600 dark:text-amber-400":"text-slate-700 dark:text-slate-300"}(e.dataPrevExec)}`,children:[s.jsx(x,{className:"h-3 w-3 text-slate-400"}),e.dataPrevExec]})]})]})]})]})},e.id))}),T>1&&s.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 py-6 border-t border-slate-200 dark:border-slate-800 mt-8",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>q(e=>Math.max(1,e-1)),disabled:1===P,className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 hover:bg-slate-100 dark:hover:bg-slate-800 h-10 px-4 py-2 text-slate-900 dark:text-slate-100",children:"Anterior"}),(0,s.jsxs)("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 px-4",children:["P\xe1gina ",P," de ",T]}),s.jsx("button",{onClick:()=>q(e=>Math.min(T,e+1)),disabled:P===T,className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 hover:bg-slate-100 dark:hover:bg-slate-800 h-10 px-4 py-2 text-slate-900 dark:text-slate-100",children:"Pr\xf3ximo"})]})}),0===O.length&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-muted-foreground bg-white dark:bg-slate-900 rounded-lg border border-dashed border-slate-300 dark:border-slate-800",children:[s.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-full mb-4",children:s.jsx(l.Z,{className:"h-8 w-8 text-slate-300 dark:text-slate-600"})}),s.jsx("p",{className:"text-xl font-semibold text-slate-700 dark:text-slate-200",children:"Nenhum resultado encontrado"}),s.jsx("p",{className:"text-sm mt-1 mb-6 max-w-sm text-center text-muted-foreground",children:"N\xe3o encontramos nenhuma OS com os filtros atuais. Tente buscar por outro termo ou limpar os filtros."}),s.jsx("button",{onClick:()=>{y(""),v("Todos")},className:"text-primary hover:underline font-medium",children:"Limpar filtros"})]})]})})}},19591:(e,a,t)=>{"use strict";t.d(a,{C:()=>i});var s=t(95344);t(3729);var r=t(11453);function i({className:e,variant:a="default",...t}){return s.jsx("div",{className:(0,r.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-emerald-500/50 bg-transparent text-emerald-600 dark:text-emerald-400 dark:border-emerald-500/30",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600",orange:"border-transparent bg-orange-500 text-white hover:bg-orange-600","light-green":"border-emerald-500/30 bg-transparent text-emerald-600 dark:text-emerald-400/80 dark:border-emerald-500/20"}[a],e),...t})}},23673:(e,a,t)=>{"use strict";t.d(a,{Ol:()=>n,SZ:()=>l,Zb:()=>d,aY:()=>c,eW:()=>u,ll:()=>o});var s=t(95344),r=t(3729),i=t(11453);let d=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));d.displayName="Card";let n=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...a}));n.displayName="CardHeader";let o=r.forwardRef(({className:e,...a},t)=>s.jsx("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));o.displayName="CardTitle";let l=r.forwardRef(({className:e,...a},t)=>s.jsx("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...a}));l.displayName="CardDescription";let c=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...a}));c.displayName="CardContent";let u=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...a}));u.displayName="CardFooter"},46540:(e,a,t)=>{"use strict";t.d(a,{I:()=>d});var s=t(95344),r=t(3729),i=t(11453);let d=r.forwardRef(({className:e,type:a,...t},r)=>s.jsx("input",{type:a,className:(0,i.cn)("flex h-11 w-full rounded-md border border-input bg-background px-4 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all",e),ref:r,...t}));d.displayName="Input"},13398:(e,a,t)=>{"use strict";t.r(a),t.d(a,{createEquipe:()=>u,deleteEquipe:()=>m,getEquipes:()=>p,updateEquipe:()=>f,updatePreferences:()=>c,updateProfile:()=>b});var s=t(98601);t(75811);var r=t(50841),i=t(43811),d=t(68474),n=t(28462),o=t(19961);function l(e){return/^[a-zA-Z0-9]+$/.test(e)}async function c(e,a){let t=await (0,d.requireAuth)().catch(()=>null);if(!t)return{message:"N\xe3o autenticado."};try{return await r.prisma.equipe.update({where:{id:t.id},data:{[e]:a}}),o.logger.info("Preferences updated",{userId:t.id,key:e,value:a}),(0,i.revalidatePath)("/os"),{success:!0}}catch(s){if("P2025"===s.code)return o.logger.error("Preferences update failed: User record not found. User needs to re-login.",{userId:t.id}),{message:"Sess\xe3o expirada ou usu\xe1rio n\xe3o encontrado. Por favor, saia e entre novamente."};return o.logger.error("Error updating preferences",{userId:t.id,key:e,value:a,error:String(s)}),{message:"Erro ao salvar prefer\xeancia."}}}async function u(e,a){try{await (0,d.requireAdmin)()}catch{return{message:"N\xe3o autorizado."}}let t=a.get("name"),s=a.get("fullName"),c=a.get("phone"),u=a.get("password"),m="true"===a.get("isAdmin");if(!t||!u||u.length<6)return{message:"Nome de usu\xe1rio e senha (min 6 caracteres) s\xe3o obrigat\xf3rios."};if(!l(t))return{message:"Nome de usu\xe1rio deve conter apenas letras e n\xfameros (sem espa\xe7os)."};try{if(await r.prisma.equipe.findUnique({where:{name:t}}))return{message:"J\xe1 existe um usu\xe1rio com este nome."};let e=await n.default.hash(u,10);return await r.prisma.equipe.create({data:{name:t,fullName:s,password:e,isAdmin:m,phone:c,nomeEquipe:t}}),(0,i.revalidatePath)("/admin/equipes"),{success:!0,message:`${m?"Administrador":"Usu\xe1rio/Equipe"} "${t}" criado com sucesso!`}}catch(e){if(o.logger.error("Error creating equipe",{error:String(e)}),"P2002"===e.code)return{message:"J\xe1 existe um usu\xe1rio com este nome."};return{message:"Erro ao criar usu\xe1rio: "+(e.message||"Erro desconhecido")}}}async function m(e){try{await (0,d.requireAdmin)()}catch{return{message:"N\xe3o autorizado."}}try{return await r.prisma.equipe.delete({where:{id:e}}),(0,i.revalidatePath)("/admin/equipes"),{success:!0}}catch(e){return o.logger.error("Error deleting equipe",{error:String(e)}),{message:"Erro ao remover usu\xe1rio."}}}async function f(e,a){try{await (0,d.requireAdmin)()}catch{return{message:"N\xe3o autorizado."}}try{let t={};if(a.name){if(!l(a.name))return{message:"Nome de usu\xe1rio deve conter apenas letras e n\xfameros."};t.name=a.name}return void 0!==a.fullName&&(t.fullName=a.fullName),void 0!==a.phone&&(t.phone=a.phone),a.password&&a.password.length>=6&&(t.password=await n.default.hash(a.password,10)),void 0!==a.isAdmin&&(t.isAdmin=a.isAdmin),await r.prisma.equipe.update({where:{id:e},data:t}),(0,i.revalidatePath)("/admin/equipes"),{success:!0,message:"Usu\xe1rio atualizado!"}}catch(e){return o.logger.error("Error updating equipe",{error:String(e)}),{message:"Erro ao atualizar usu\xe1rio."}}}async function p(){return r.prisma.equipe.findMany({select:{id:!0,name:!0,fullName:!0,nomeEquipe:!0,phone:!0,isAdmin:!0,createdAt:!0,updatedAt:!0},orderBy:{createdAt:"desc"}})}async function b(e){let a=await (0,d.requireAuth)().catch(()=>null);if(!a)return{message:"N\xe3o autenticado."};try{let t={};if(e.name){if(!l(e.name))return{message:"Nome de usu\xe1rio deve conter apenas letras e n\xfameros."};if(await r.prisma.equipe.findFirst({where:{name:e.name,NOT:{id:a.id}}}))return{message:"Este nome de usu\xe1rio j\xe1 est\xe1 em uso."};t.name=e.name}return void 0!==e.fullName&&(t.fullName=e.fullName),void 0!==e.phone&&(t.phone=e.phone),e.password&&e.password.length>=6&&(t.password=await n.default.hash(e.password,10)),await r.prisma.equipe.update({where:{id:a.id},data:t}),(0,i.revalidatePath)("/profile"),(0,i.revalidatePath)("/os"),{success:!0,message:"Perfil atualizado com sucesso!"}}catch(e){return o.logger.error("Error updating profile",{error:String(e)}),{message:"Erro ao atualizar perfil."}}}(0,t(46893).ensureServerEntryExports)([c,u,m,f,p,b]),(0,s.createActionProxy)("c5f7132601121f48314d1a51ecac279117f08ff6",c),(0,s.createActionProxy)("3a7a815bcde402ec80a76d4915ddaa24dd2697a6",u),(0,s.createActionProxy)("c98ca564b4813ac5836f5e16d8b41e62d1cf9860",m),(0,s.createActionProxy)("e0bf2b8da39f29f7764053adebc46527dec3237e",f),(0,s.createActionProxy)("2dd604a4fa171d5bf4edd119607f12882f2f1233",p),(0,s.createActionProxy)("bb9004a81e2ec4420b2b97debd5f27e567e92ef6",b)},19414:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>f});var s=t(25036),r=t(85843);let i=(0,t(86843).createProxy)(String.raw`C:\Programas\PROJETOS\sistema-time-de-campo\src\app\os\OSListClient.tsx`),{__esModule:d,$$typeof:n}=i,o=i.default;var l=t(74801),c=t(81494),u=t(55379),m=t(72245);async function f(){let e=await (0,r.NO)(),a=await c._.serviceExecution.findMany({select:{osId:!0,status:!0,obs:!0,updatedAt:!0,equipe:{select:{name:!0,nomeEquipe:!0,fullName:!0}}}}),t=new Map;for(let e of a)t.set(e.osId,{status:e.status,obs:e.obs,equipeName:e.equipe?.fullName||e.equipe?.nomeEquipe||e.equipe?.name||"-",updatedAt:e.updatedAt});let i=e.map(e=>{let a,s;let r=t.get(e.id),i="Pendente";return r&&(a=r.equipeName,((i=(0,m.x)({osStatus:e.status,execution:r}).label).includes("Conclu\xedda")||i.includes("Sem Execu\xe7\xe3o"))&&(s=r.updatedAt.toISOString())),{...e,executionStatus:i,equipeName:a,closedAt:s}}),d=await (0,u.getSession)(),n="Todos",f="",p="Abertas";if(d){let e=await c._.equipe.findUnique({where:{id:d.id},select:{lastUf:!0,lastStatus:!0,lastSearch:!0}});e&&(n=e.lastUf||"Todos",f=e.lastSearch||"",p=e.lastStatus||"Abertas")}return(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.c,{}),s.jsx(o,{initialOSList:i,initialUf:n,initialSearch:f,initialStatus:p})]})}},85843:(e,a,t)=>{"use strict";t.d(a,{NO:()=>r,ho:()=>i});var s=t(81494);async function r(){return(await s._.orderOfService.findMany({include:{caixas:{select:{id:!0}},attachments:!0},orderBy:{pop:"asc"}})).map(e=>({id:e.id,pop:e.pop,status:e.status,uf:e.uf,dataEntrante:e.dataEntrante,dataPrevExec:e.dataPrevExec,dataConclusao:e.dataConclusao,mes:e.mes,valorServico:e.valorServico,statusMedicao:e.statusMedicao,statusFinal:e.statusFinal,tempo:e.tempo,facilidadesPlanejadas:e.facilidadesPlanejadas,caixasPlanejadas:e.caixasPlanejadas,tipoOs:e.tipoOs,cenario:e.cenario,protocolo:e.protocolo,totalCaixas:e.caixas.length,condominio:e.condominio||void 0,descricao:e.descricao||void 0,anexos:e.attachments.map(e=>({id:e.id,name:e.name,path:e.path,size:e.size,type:e.type}))}))}async function i(e){let a=await s._.orderOfService.findFirst({where:{OR:[{id:e},{pop:e}]},include:{caixas:{include:{photos:!0}},attachments:!0}});if(!a)return null;let t=await s._.equipe.findMany({select:{id:!0,fullName:!0,nomeEquipe:!0,name:!0}}),r=new Map;t.forEach(e=>{r.set(e.id,e.fullName||e.nomeEquipe||e.name)});let i=a.caixas.map(e=>{let t=[];t.push(a.pop),e.chassi&&t.push(e.chassi),e.placa&&t.push(e.placa),e.olt&&t.push(e.olt),t.push(e.cto);let s=e.equipe&&r.get(e.equipe)||e.nomeEquipe;return{id:e.id,cto:e.cto,pop:e.pop,cidade:e.cidade,uf:e.uf,chassi:e.chassi||void 0,placa:e.placa||void 0,olt:e.olt||void 0,cenario:e.cenario,bairro:e.bairro,chassiPath:t.filter(Boolean).join("/"),endereco:e.endereco||"",lat:e.lat,long:e.long,status:e.status,valor:e.valor,equipe:e.equipe,obs:e.obs,data:e.data,nomeEquipe:s,potencia:e.potencia,done:"OK"===e.status,certified:e.certified,photos:e.photos.map(e=>({id:e.id,path:e.path,equipeId:e.equipeId}))}});return{id:a.id,pop:a.pop,status:a.status,protocolo:a.protocolo,uf:a.uf,dataEntrante:a.dataEntrante,dataPrevExec:a.dataPrevExec,dataConclusao:a.dataConclusao,mes:a.mes,valorServico:a.valorServico,statusMedicao:a.statusMedicao,statusFinal:a.statusFinal,tempo:a.tempo,facilidadesPlanejadas:a.facilidadesPlanejadas,caixasPlanejadas:a.caixasPlanejadas,tipoOs:a.tipoOs,cenario:a.cenario,totalCaixas:i.length,items:i,condominio:a.condominio||void 0,descricao:a.descricao||void 0,anexos:a.attachments.map(e=>({id:e.id,name:e.name,path:e.path,size:e.size,type:e.type}))}}}};var a=require("../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[893,402,235,722,341,163,213],()=>t(91852));module.exports=s})();