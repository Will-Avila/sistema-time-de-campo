(()=>{var e={};e.id=85,e.ids=[85],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},45138:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>o});var s=r(50482),t=r(69108),n=r(62563),d=r.n(n),i=r(68300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(a,l);let o=["",{children:["admin",{children:["equipes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5350)),"C:\\Programas\\PROJETOS\\sistema-time-de-campo\\src\\app\\admin\\equipes\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,49223)),"C:\\Programas\\PROJETOS\\sistema-time-de-campo\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,92793)),"C:\\Programas\\PROJETOS\\sistema-time-de-campo\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Programas\\PROJETOS\\sistema-time-de-campo\\src\\app\\admin\\equipes\\page.tsx"],u="/admin/equipes/page",m={require:r,loadChunk:()=>Promise.resolve()},f=new s.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/admin/equipes/page",pathname:"/admin/equipes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},93573:(e,a,r)=>{let s={"4f7cc3295bc1862da856a082439e474acd72ddb0":()=>Promise.resolve().then(r.bind(r,67778)).then(e=>e.logout),bbec7576f1f50640a4a678e3194e37400ea45963:()=>Promise.resolve().then(r.bind(r,67778)).then(e=>e.login),"22c53d6cc54bce46a621cc2c18c29a4b6151f7eb":()=>Promise.resolve().then(r.bind(r,36051)).then(e=>e.createNotification),"531833ed2258d48c2a40d41cd7d226d4ccc024cc":()=>Promise.resolve().then(r.bind(r,36051)).then(e=>e.markAsRead),"84b4112fe213bb4e51d524390b924583a28cf4a6":()=>Promise.resolve().then(r.bind(r,36051)).then(e=>e.getUnreadNotifications),a097c09bcedad3830c63ef8bf1297807d0616abc:()=>Promise.resolve().then(r.bind(r,36051)).then(e=>e.markAllAsRead)};async function t(e,...a){return(await s[e]()).apply(null,a)}e.exports={"4f7cc3295bc1862da856a082439e474acd72ddb0":t.bind(null,"4f7cc3295bc1862da856a082439e474acd72ddb0"),bbec7576f1f50640a4a678e3194e37400ea45963:t.bind(null,"bbec7576f1f50640a4a678e3194e37400ea45963"),"22c53d6cc54bce46a621cc2c18c29a4b6151f7eb":t.bind(null,"22c53d6cc54bce46a621cc2c18c29a4b6151f7eb"),"531833ed2258d48c2a40d41cd7d226d4ccc024cc":t.bind(null,"531833ed2258d48c2a40d41cd7d226d4ccc024cc"),"84b4112fe213bb4e51d524390b924583a28cf4a6":t.bind(null,"84b4112fe213bb4e51d524390b924583a28cf4a6"),a097c09bcedad3830c63ef8bf1297807d0616abc:t.bind(null,"a097c09bcedad3830c63ef8bf1297807d0616abc")}},79267:(e,a,r)=>{let s={"2dd604a4fa171d5bf4edd119607f12882f2f1233":()=>Promise.resolve().then(r.bind(r,96349)).then(e=>e.getEquipes),"3a7a815bcde402ec80a76d4915ddaa24dd2697a6":()=>Promise.resolve().then(r.bind(r,96349)).then(e=>e.createEquipe),bb9004a81e2ec4420b2b97debd5f27e567e92ef6:()=>Promise.resolve().then(r.bind(r,96349)).then(e=>e.updateProfile),c5f7132601121f48314d1a51ecac279117f08ff6:()=>Promise.resolve().then(r.bind(r,96349)).then(e=>e.updatePreferences),c98ca564b4813ac5836f5e16d8b41e62d1cf9860:()=>Promise.resolve().then(r.bind(r,96349)).then(e=>e.deleteEquipe),e0bf2b8da39f29f7764053adebc46527dec3237e:()=>Promise.resolve().then(r.bind(r,96349)).then(e=>e.updateEquipe),"01aa194246fb3cd3909854170a6a003e66db9b89":()=>Promise.resolve().then(r.bind(r,55379)).then(e=>e.getSession),"6025ca35376357c0da7f5b807633b24af797ac4b":()=>Promise.resolve().then(r.bind(r,55379)).then(e=>e.clearSessionCookie),"7f6832b04b751148a6382dd64a1cc223449e53b3":()=>Promise.resolve().then(r.bind(r,55379)).then(e=>e.requireAuth),"8d8f3bd62d0a07b2792f9104701a5c0433fbcdee":()=>Promise.resolve().then(r.bind(r,55379)).then(e=>e.requireAdmin),bbad0871288a94d710af6fbd6788ce5f0465e0e3:()=>Promise.resolve().then(r.bind(r,55379)).then(e=>e.createToken),bdb6b21ecc9aab6757183c887af3cd3c576bd3b3:()=>Promise.resolve().then(r.bind(r,55379)).then(e=>e.setSessionCookie)};async function t(e,...a){return(await s[e]()).apply(null,a)}e.exports={"2dd604a4fa171d5bf4edd119607f12882f2f1233":t.bind(null,"2dd604a4fa171d5bf4edd119607f12882f2f1233"),"3a7a815bcde402ec80a76d4915ddaa24dd2697a6":t.bind(null,"3a7a815bcde402ec80a76d4915ddaa24dd2697a6"),bb9004a81e2ec4420b2b97debd5f27e567e92ef6:t.bind(null,"bb9004a81e2ec4420b2b97debd5f27e567e92ef6"),c5f7132601121f48314d1a51ecac279117f08ff6:t.bind(null,"c5f7132601121f48314d1a51ecac279117f08ff6"),c98ca564b4813ac5836f5e16d8b41e62d1cf9860:t.bind(null,"c98ca564b4813ac5836f5e16d8b41e62d1cf9860"),e0bf2b8da39f29f7764053adebc46527dec3237e:t.bind(null,"e0bf2b8da39f29f7764053adebc46527dec3237e"),"01aa194246fb3cd3909854170a6a003e66db9b89":t.bind(null,"01aa194246fb3cd3909854170a6a003e66db9b89"),"6025ca35376357c0da7f5b807633b24af797ac4b":t.bind(null,"6025ca35376357c0da7f5b807633b24af797ac4b"),"7f6832b04b751148a6382dd64a1cc223449e53b3":t.bind(null,"7f6832b04b751148a6382dd64a1cc223449e53b3"),"8d8f3bd62d0a07b2792f9104701a5c0433fbcdee":t.bind(null,"8d8f3bd62d0a07b2792f9104701a5c0433fbcdee"),bbad0871288a94d710af6fbd6788ce5f0465e0e3:t.bind(null,"bbad0871288a94d710af6fbd6788ce5f0465e0e3"),bdb6b21ecc9aab6757183c887af3cd3c576bd3b3:t.bind(null,"bdb6b21ecc9aab6757183c887af3cd3c576bd3b3")}},53745:(e,a,r)=>{Promise.resolve().then(r.t.bind(r,61476,23)),Promise.resolve().then(r.bind(r,13353)),Promise.resolve().then(r.bind(r,85740))},38271:(e,a,r)=>{"use strict";r.d(a,{Z:()=>s});let s=(0,r(51091).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},14513:(e,a,r)=>{"use strict";r.d(a,{Z:()=>s});let s=(0,r(51091).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},13353:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>N});var s=r(95344),t=r(81202),n=r(357),d=r(3729),i=r(23673),l=r(5094),o=r(46540),c=r(19591),u=r(51091);let m=(0,u.Z)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var f=r(56389);let b=(0,u.Z)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var p=r(38271),h=r(14513),x=r(72032),g=r(30026);function v({label:e="Adicionar Usu\xe1rio",icon:a=m}){let{pending:r}=(0,t.useFormStatus)();return s.jsx(l.z,{type:"submit",disabled:r,className:"w-full md:w-auto min-w-[140px]",children:r?(0,s.jsxs)(s.Fragment,{children:[s.jsx(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(a,{className:"mr-2 h-4 w-4"}),e]})})}function j(){let{pending:e}=(0,t.useFormStatus)();return s.jsx(l.z,{type:"submit",className:"flex-1",disabled:e,children:e?(0,s.jsxs)(s.Fragment,{children:[s.jsx(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):"Salvar Altera\xe7\xf5es"})}function N({equipes:e}){let a=(0,d.useRef)(null),[r,u]=(0,d.useState)(null),[f,N]=(0,d.useState)(null),[y,w]=(0,t.useFormState)(async(e,r)=>{let s=await (0,n.jt)(e,r);return s.success?(a.current?.reset(),(0,x.A)(s.message||"Usu\xe1rio criado!","success")):(0,x.A)(s.message||"Erro ao criar.","error"),s},null);async function k(e){if(!f)return;let a={name:e.get("name"),fullName:e.get("fullName"),phone:e.get("phone"),isAdmin:"true"===e.get("isAdmin")},r=e.get("password");if(r&&(a.password=r),!/^[a-zA-Z0-9]+$/.test(a.name)){(0,x.A)("Nome de usu\xe1rio inv\xe1lido (apenas letras e n\xfameros).","error");return}let s=await (0,n.kj)(f.id,a);s.success?(N(null),(0,x.A)("Usu\xe1rio atualizado!","success")):(0,x.A)(s.message||"Erro ao atualizar.","error")}async function P(){r&&(await (0,n.XP)(r.id),u(null),(0,x.A)("Usu\xe1rio removido.","success"))}let[q,A]=(0,d.useState)("");return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{children:[s.jsx(i.ll,{children:"Adicionar Novo Usu\xe1rio / Equipe"}),s.jsx(i.SZ,{children:"Crie uma conta de acesso para os t\xe9cnicos (equipes) ou administradores."})]}),s.jsx(i.aY,{children:(0,s.jsxs)("form",{ref:a,action:w,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium leading-none",children:"Nome de Usu\xe1rio (Login)"}),s.jsx(o.I,{name:"name",type:"text",placeholder:"ex: joaosilva",required:!0,className:q?"border-red-500":"",onChange:function(e){let a=e.target.value;a&&!/^[a-zA-Z0-9]+$/.test(a)?A("Apenas letras e n\xfameros, sem espa\xe7os."):A("")}}),q&&s.jsx("p",{className:"text-xs text-red-500",children:q})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium leading-none",children:"Senha"}),s.jsx(o.I,{name:"password",type:"text",placeholder:"Min. 6 caracteres",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium leading-none",children:"Nome Completo"}),s.jsx(o.I,{name:"fullName",type:"text",placeholder:"Ex: Jo\xe3o da Silva"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium leading-none",children:"Telefone"}),s.jsx(o.I,{name:"phone",type:"text",placeholder:"(DD) 99999-9999"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium leading-none block",children:"Permiss\xe3o"}),(0,s.jsxs)("select",{name:"isAdmin",className:"h-10 w-full appearance-none rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[s.jsx("option",{value:"false",children:"Equipe / T\xe9cnico"}),s.jsx("option",{value:"true",children:"Administrador"})]})]})]}),s.jsx("div",{className:"flex justify-end pt-2",children:s.jsx(v,{label:"Criar Usu\xe1rio",icon:m})})]})})]}),(0,s.jsxs)(i.Zb,{children:[s.jsx(i.Ol,{children:s.jsx(i.ll,{children:"Usu\xe1rios Cadastrados"})}),s.jsx(i.aY,{children:s.jsx("div",{className:"rounded-md border",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-muted/50 border-b",children:(0,s.jsxs)("tr",{className:"text-left",children:[s.jsx("th",{className:"h-12 px-4 align-middle font-medium text-muted-foreground",children:"Usu\xe1rio"}),s.jsx("th",{className:"h-12 px-4 align-middle font-medium text-muted-foreground",children:"Nome Completo"}),s.jsx("th",{className:"h-12 px-4 align-middle font-medium text-muted-foreground",children:"Telefone"}),s.jsx("th",{className:"h-12 px-4 align-middle font-medium text-muted-foreground w-32",children:"N\xedvel"}),s.jsx("th",{className:"h-12 px-4 align-middle font-medium text-muted-foreground text-right",children:"A\xe7\xf5es"})]})}),s.jsx("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"border-b transition-colors hover:bg-muted/50",children:[(0,s.jsxs)("td",{className:"p-4 align-middle font-medium",children:[e.name,s.jsx("div",{className:"text-xs text-muted-foreground md:hidden",children:e.fullName})]}),s.jsx("td",{className:"p-4 align-middle hidden md:table-cell",children:e.fullName||"-"}),s.jsx("td",{className:"p-4 align-middle hidden md:table-cell",children:e.phone?(0,s.jsxs)("a",{href:`https://wa.me/${e.phone.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-muted-foreground hover:text-green-600 transition-colors group",children:[s.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"h-6 w-6 text-green-500/80 group-hover:text-green-600 group-hover:scale-110 transition-all",children:s.jsx("path",{d:"M12.031 6.172c-3.181 0-5.767 2.586-5.768 5.766-.001 1.298.38 2.27 1.019 3.287l-.711 2.598 2.664-.698c.969.585 1.85.892 2.796.892 3.183 0 5.768-2.586 5.768-5.766-5e-4-3.18-2.585-5.779-5.768-5.779zm0 10c-.793 0-1.551-.237-2.181-.61l-.147-.091-1.492.391.398-1.455-.098-.168c-.461-.795-.71-1.579-.711-2.301.001-2.327 1.896-4.225 4.231-4.225 2.329 0 4.226 1.896 4.226 4.227 0 2.331-1.899 4.232-4.226 4.232zm2.149-3.297c-.113-.057-.667-.329-.771-.367-.103-.038-.179-.057-.254.057-.076.114-.291.368-.358.444-.067.076-.134.086-.247.029-.115-.057-.49-.181-.925-.568-.34-.303-.57-.677-.635-.792-.067-.114-.007-.176.05-.233.05-.05.113-.133.171-.199.057-.067.075-.114.113-.19.038-.076.019-.143-.01-.199-.029-.057-.254-.613-.349-.838-.093-.221-.188-.191-.257-.195l-.219-.005c-.076 0-.199.028-.303.143-.105.114-.403.394-.403.96 0 .567.412 1.115.47 1.191.058.077.81 1.238 1.965 1.737.954.412.954.275 1.309.256.354-.019 1.115-.456 1.229-.896.114-.44.114-.818.08-.875-.034-.057-.125-.091-.238-.148z"})}),e.phone]}):s.jsx("span",{className:"text-muted-foreground",children:"-"})}),s.jsx("td",{className:"p-4 align-middle",children:e.isAdmin?s.jsx(c.C,{className:"bg-slate-900",children:"Admin"}):s.jsx(c.C,{variant:"secondary",children:"Equipe"})}),s.jsx("td",{className:"p-4 align-middle text-right",children:(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[s.jsx(l.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:()=>N(e),children:s.jsx(b,{className:"h-4 w-4"})}),s.jsx(l.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>u({id:e.id,name:e.name}),children:s.jsx(p.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})})})]}),f&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:(0,s.jsxs)(i.Zb,{className:"w-full max-w-md relative shadow-xl",children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[s.jsx(i.ll,{children:"Editar Usu\xe1rio"}),s.jsx(l.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>N(null),children:s.jsx(h.Z,{className:"h-4 w-4"})})]}),s.jsx(i.aY,{children:(0,s.jsxs)("form",{action:k,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium leading-none",children:"Nome de Usu\xe1rio"}),s.jsx(o.I,{name:"name",defaultValue:f.name,required:!0,pattern:"[a-zA-Z0-9]+",title:"Apenas letras e n\xfameros, sem espa\xe7os"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium leading-none",children:"Nome Completo"}),s.jsx(o.I,{name:"fullName",defaultValue:f.fullName})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium leading-none",children:"Telefone"}),s.jsx(o.I,{name:"phone",defaultValue:f.phone})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium leading-none",children:"Senha"}),s.jsx(o.I,{name:"password",type:"text",placeholder:"Nova senha (deixe em branco para manter)"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium leading-none",children:"Permiss\xe3o"}),(0,s.jsxs)("select",{name:"isAdmin",defaultValue:String(f.isAdmin),className:"h-10 w-full appearance-none rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[s.jsx("option",{value:"false",children:"Equipe / Respons\xe1vel"}),s.jsx("option",{value:"true",children:"Administrador"})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[s.jsx(l.z,{type:"button",variant:"outline",className:"flex-1",onClick:()=>N(null),children:"Cancelar"}),s.jsx(j,{})]})]})})]})}),s.jsx(g.s,{open:!!r,title:"Remover Usu\xe1rio",message:`Tem certeza que deseja remover "${r?.name}"? Esta a\xe7\xe3o n\xe3o pode ser desfeita.`,variant:"danger",confirmLabel:"Remover",onConfirm:P,onCancel:()=>u(null)})]})}},19591:(e,a,r)=>{"use strict";r.d(a,{C:()=>n});var s=r(95344);r(3729);var t=r(11453);function n({className:e,variant:a="default",...r}){return s.jsx("div",{className:(0,t.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-emerald-500/50 bg-transparent text-emerald-600 dark:text-emerald-400 dark:border-emerald-500/30",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600",orange:"border-transparent bg-orange-500 text-white hover:bg-orange-600","light-green":"border-emerald-500/30 bg-transparent text-emerald-600 dark:text-emerald-400/80 dark:border-emerald-500/20"}[a],e),...r})}},23673:(e,a,r)=>{"use strict";r.d(a,{Ol:()=>i,SZ:()=>o,Zb:()=>d,aY:()=>c,eW:()=>u,ll:()=>l});var s=r(95344),t=r(3729),n=r(11453);let d=t.forwardRef(({className:e,...a},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));d.displayName="Card";let i=t.forwardRef(({className:e,...a},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...a}));i.displayName="CardHeader";let l=t.forwardRef(({className:e,...a},r)=>s.jsx("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));l.displayName="CardTitle";let o=t.forwardRef(({className:e,...a},r)=>s.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...a}));o.displayName="CardDescription";let c=t.forwardRef(({className:e,...a},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...a}));c.displayName="CardContent";let u=t.forwardRef(({className:e,...a},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...a}));u.displayName="CardFooter"},30026:(e,a,r)=>{"use strict";r.d(a,{s:()=>i});var s=r(95344),t=r(23673),n=r(5094),d=r(65719);function i({open:e,title:a,message:r,confirmLabel:i="Confirmar",cancelLabel:l="Cancelar",variant:o="default",onConfirm:c,onCancel:u}){return e?s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:s.jsx(t.Zb,{className:"w-full max-w-sm shadow-2xl dark:bg-slate-900 dark:border-slate-700",children:(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`p-2 rounded-full shrink-0 ${"danger"===o?"bg-red-100 dark:bg-red-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:s.jsx(d.Z,{className:`h-5 w-5 ${"danger"===o?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-100",children:a}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:r})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[s.jsx(n.z,{variant:"outline",onClick:u,className:"dark:border-slate-600 dark:text-slate-300",children:l}),s.jsx(n.z,{variant:"danger"===o?"destructive":"default",onClick:c,children:i})]})]})})}):null}},46540:(e,a,r)=>{"use strict";r.d(a,{I:()=>d});var s=r(95344),t=r(3729),n=r(11453);let d=t.forwardRef(({className:e,type:a,...r},t)=>s.jsx("input",{type:a,className:(0,n.cn)("flex h-11 w-full rounded-md border border-input bg-background px-4 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all",e),ref:t,...r}));d.displayName="Input"},72032:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});var s=r(34755);function t(e,a="info"){switch(a){case"success":s.Am.success(e);break;case"error":s.Am.error(e);break;case"warning":s.Am.warning(e);break;default:s.Am.info(e)}}},26540:(e,a,r)=>{"use strict";r.d(a,{Z:()=>s});let s=(0,r(12589).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},96349:(e,a,r)=>{"use strict";r.r(a),r.d(a,{createEquipe:()=>u,deleteEquipe:()=>m,getEquipes:()=>b,updateEquipe:()=>f,updatePreferences:()=>c,updateProfile:()=>p});var s=r(74471);r(68616);var t=r(81494),n=r(66864),d=r(55379),i=r(7529),l=r(3966);function o(e){return/^[a-zA-Z0-9]+$/.test(e)}async function c(e,a){let r=await (0,d.requireAuth)().catch(()=>null);if(!r)return{message:"N\xe3o autenticado."};try{return await t._.equipe.update({where:{id:r.id},data:{[e]:a}}),l.k.info("Preferences updated",{userId:r.id,key:e,value:a}),(0,n.revalidatePath)("/os"),{success:!0}}catch(s){if("P2025"===s.code)return l.k.error("Preferences update failed: User record not found. User needs to re-login.",{userId:r.id}),{message:"Sess\xe3o expirada ou usu\xe1rio n\xe3o encontrado. Por favor, saia e entre novamente."};return l.k.error("Error updating preferences",{userId:r.id,key:e,value:a,error:String(s)}),{message:"Erro ao salvar prefer\xeancia."}}}async function u(e,a){try{await (0,d.requireAdmin)()}catch{return{message:"N\xe3o autorizado."}}let r=a.get("name"),s=a.get("fullName"),c=a.get("phone"),u=a.get("password"),m="true"===a.get("isAdmin");if(!r||!u||u.length<6)return{message:"Nome de usu\xe1rio e senha (min 6 caracteres) s\xe3o obrigat\xf3rios."};if(!o(r))return{message:"Nome de usu\xe1rio deve conter apenas letras e n\xfameros (sem espa\xe7os)."};try{if(await t._.equipe.findUnique({where:{name:r}}))return{message:"J\xe1 existe um usu\xe1rio com este nome."};let e=await i.ZP.hash(u,10);return await t._.equipe.create({data:{name:r,fullName:s,password:e,isAdmin:m,phone:c,nomeEquipe:r}}),(0,n.revalidatePath)("/admin/equipes"),{success:!0,message:`${m?"Administrador":"Usu\xe1rio/Equipe"} "${r}" criado com sucesso!`}}catch(e){if(l.k.error("Error creating equipe",{error:String(e)}),"P2002"===e.code)return{message:"J\xe1 existe um usu\xe1rio com este nome."};return{message:"Erro ao criar usu\xe1rio: "+(e.message||"Erro desconhecido")}}}async function m(e){try{await (0,d.requireAdmin)()}catch{return{message:"N\xe3o autorizado."}}try{return await t._.equipe.delete({where:{id:e}}),(0,n.revalidatePath)("/admin/equipes"),{success:!0}}catch(e){return l.k.error("Error deleting equipe",{error:String(e)}),{message:"Erro ao remover usu\xe1rio."}}}async function f(e,a){try{await (0,d.requireAdmin)()}catch{return{message:"N\xe3o autorizado."}}try{let r={};if(a.name){if(!o(a.name))return{message:"Nome de usu\xe1rio deve conter apenas letras e n\xfameros."};r.name=a.name}return void 0!==a.fullName&&(r.fullName=a.fullName),void 0!==a.phone&&(r.phone=a.phone),a.password&&a.password.length>=6&&(r.password=await i.ZP.hash(a.password,10)),void 0!==a.isAdmin&&(r.isAdmin=a.isAdmin),await t._.equipe.update({where:{id:e},data:r}),(0,n.revalidatePath)("/admin/equipes"),{success:!0,message:"Usu\xe1rio atualizado!"}}catch(e){return l.k.error("Error updating equipe",{error:String(e)}),{message:"Erro ao atualizar usu\xe1rio."}}}async function b(){return t._.equipe.findMany({select:{id:!0,name:!0,fullName:!0,nomeEquipe:!0,phone:!0,isAdmin:!0,createdAt:!0,updatedAt:!0},orderBy:{createdAt:"desc"}})}async function p(e){let a=await (0,d.requireAuth)().catch(()=>null);if(!a)return{message:"N\xe3o autenticado."};try{let r={};if(e.name){if(!o(e.name))return{message:"Nome de usu\xe1rio deve conter apenas letras e n\xfameros."};if(await t._.equipe.findFirst({where:{name:e.name,NOT:{id:a.id}}}))return{message:"Este nome de usu\xe1rio j\xe1 est\xe1 em uso."};r.name=e.name}return void 0!==e.fullName&&(r.fullName=e.fullName),void 0!==e.phone&&(r.phone=e.phone),e.password&&e.password.length>=6&&(r.password=await i.ZP.hash(e.password,10)),await t._.equipe.update({where:{id:a.id},data:r}),(0,n.revalidatePath)("/profile"),(0,n.revalidatePath)("/os"),{success:!0,message:"Perfil atualizado com sucesso!"}}catch(e){return l.k.error("Error updating profile",{error:String(e)}),{message:"Erro ao atualizar perfil."}}}(0,r(42053).h)([c,u,m,f,b,p]),(0,s.U)("c5f7132601121f48314d1a51ecac279117f08ff6",c),(0,s.U)("3a7a815bcde402ec80a76d4915ddaa24dd2697a6",u),(0,s.U)("c98ca564b4813ac5836f5e16d8b41e62d1cf9860",m),(0,s.U)("e0bf2b8da39f29f7764053adebc46527dec3237e",f),(0,s.U)("2dd604a4fa171d5bf4edd119607f12882f2f1233",b),(0,s.U)("bb9004a81e2ec4420b2b97debd5f27e567e92ef6",p)},5350:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>f});var s=r(25036),t=r(96349);let n=(0,r(86843).createProxy)(String.raw`C:\Programas\PROJETOS\sistema-time-de-campo\src\app\admin\equipes\EquipeManager.tsx`),{__esModule:d,$$typeof:i}=n,l=n.default;var o=r(16274),c=r(38052),u=r(26540),m=r(74801);async function f(){let e=await (0,t.getEquipes)();return(0,s.jsxs)("div",{className:"min-h-screen bg-muted/40 dark:bg-slate-950 transition-colors",children:[s.jsx(m.c,{}),(0,s.jsxs)("div",{className:"pt-20 px-6 md:px-8 pb-8",children:[(0,s.jsxs)("header",{className:"mb-8 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"Contas de Acesso"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Gerencie equipes e administradores do sistema."})]}),s.jsx(o.default,{href:"/admin/dashboard",children:(0,s.jsxs)(c.z,{variant:"outline",className:"gap-2",children:[s.jsx(u.Z,{className:"h-4 w-4"}),"Voltar ao Dashboard"]})})]}),s.jsx(l,{equipes:e})]})]})}},38052:(e,a,r)=>{"use strict";r.d(a,{z:()=>d});var s=r(25036),t=r(40002),n=r(72245);let d=t.forwardRef(({className:e,variant:a="default",size:r="default",...t},d)=>s.jsx("button",{className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"}[a],{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[r],e),ref:d,...t}));d.displayName="Button"},3966:(e,a,r)=>{"use strict";r.d(a,{k:()=>t});class s{log(e,a,r){console.log(JSON.stringify({timestamp:new Date().toISOString(),level:e,message:a,metadata:r}))}info(e,a){this.log("info",e,a)}warn(e,a){this.log("warn",e,a)}error(e,a){this.log("error",e,a)}}let t=new s}};var a=require("../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),s=a.X(0,[893,402,235,722,341,874,163,213],()=>r(45138));module.exports=s})();