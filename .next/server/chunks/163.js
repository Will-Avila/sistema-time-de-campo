exports.id=163,exports.ids=[163],exports.modules={62364:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,26840,23)),Promise.resolve().then(t.t.bind(t,38771,23)),Promise.resolve().then(t.t.bind(t,13225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,43982,23))},50888:(e,r,t)=>{Promise.resolve().then(t.bind(t,89906)),Promise.resolve().then(t.bind(t,6400))},35303:()=>{},12998:(e,r,t)=>{"use strict";t.d(r,{k:()=>n,x:()=>o}),t(13664);var s=t(28371),n=(0,s.$)("4f7cc3295bc1862da856a082439e474acd72ddb0"),o=(0,s.$)("bbec7576f1f50640a4a678e3194e37400ea45963")},89906:(e,r,t)=>{"use strict";t.r(r),t.d(r,{ThemeProvider:()=>o});var s=t(95344);t(3729);var n=t(99558);function o({children:e,...r}){return s.jsx(n.f,{...r,children:e})}},5094:(e,r,t)=>{"use strict";t.d(r,{z:()=>a});var s=t(95344),n=t(3729),o=t(11453);let a=n.forwardRef(({className:e,variant:r="default",size:t="default",...n},a)=>s.jsx("button",{className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"}[r],{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[t],e),ref:a,...n}));a.displayName="Button"},6400:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Toaster:()=>a});var s=t(95344),n=t(99558),o=t(34755);let a=({...e})=>{let{theme:r="system"}=(0,n.F)();return s.jsx(o.x7,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})}},11453:(e,r,t)=>{"use strict";t.d(r,{A:()=>l,cn:()=>d,x:()=>u});var s=t(56815),n=t(79377),o=t(65719),a=t(66262),i=t(25545),c=t(88737);function d(...e){return(0,n.m6)((0,s.W)(e))}function u(e){let{osStatus:r,execution:t}=e,s=(r||"").toLowerCase(),n="conclu\xeddo"===s||"concluido"===s||"encerrada"===s,d="em execu\xe7\xe3o"===s||"em execucao"===s,u=r||"Pendente",l="secondary",m=o.Z;if(t){let e="Conclu\xedda";if(t.obs){let r=t.obs.match(/Status: (.*?)\n/);r&&r[1]?e=r[1]:t.obs.includes("Sem Execu\xe7\xe3o")&&(e="Sem Execu\xe7\xe3o")}"encerrada"===s||"conclu\xeddo"===s||"concluido"===s?(l=(u=e).includes("Sem Execu\xe7\xe3o")?"destructive":"success",m=a.Z):"DONE"===t.status?(l=(u=`${e} - Em an\xe1lise`).includes("Sem Execu\xe7\xe3o")?"orange":"light-green",m=i.Z):"PENDING"===t.status||d?(u="Em execu\xe7\xe3o",l="warning",m=c.Z):n&&(u="Conclu\xedda",l="success",m=a.Z)}else d?(u="Em execu\xe7\xe3o",l="warning",m=c.Z):n?(u="Conclu\xedda",l="success",m=a.Z):"cancelado"===s&&(u="Cancelada",l="destructive",m=o.Z);return{label:u,variant:l,icon:m}}function l(e){let r=(e||"").toLowerCase();return"conclu\xedda"===r||"concluida"===r?"success":"sem execu\xe7\xe3o"===r||"cancelada"===r?"destructive":"em execu\xe7\xe3o"===r||"em execucao"===r?"warning":r.includes("sem execu\xe7\xe3o - em an\xe1lise")||r.includes("sem execucao - em analise")?"orange":r.includes("em an\xe1lise")||r.includes("em analise")?"light-green":"secondary"}},67778:(e,r,t)=>{"use strict";t.r(r),t.d(r,{login:()=>m,logout:()=>g});var s=t(98601);t(75811);var n=t(32870),o=t(50841),a=t(19961),i=t(52810),c=t(68474),d=t(28462),u=t(46893);let l=n.z.object({username:n.z.string().min(1,"Usu\xe1rio \xe9 obrigat\xf3rio"),password:n.z.string().min(6,"Senha deve ter no m\xednimo 6 caracteres")});async function m(e,r){let t={username:r.get("username"),password:r.get("password")},s=l.safeParse(t);if(!s.success)return{errors:s.error.flatten().fieldErrors,message:"Campos inv\xe1lidos. Verifique os dados."};let{username:n,password:u}=s.data;try{let e=await o.prisma.equipe.findFirst({where:{name:n}});if(!e)return a.logger.warn("Login failed: User not found",{username:n}),{message:"Credenciais inv\xe1lidas."};if(!await d.default.compare(u,e.password))return a.logger.warn("Login failed: Invalid password",{username:n}),{message:"Credenciais inv\xe1lidas."};let r=await (0,c.createToken)({id:e.id,username:e.name,isAdmin:e.isAdmin});(0,c.setSessionCookie)(r),a.logger.info("Login successful",{username:n,equipeId:e.id}),(0,i.redirect)(e.isAdmin?"/admin/dashboard":"/os")}catch(e){if(e instanceof Error&&"NEXT_REDIRECT"===e.message)throw e;return a.logger.error("Login error",{error:String(e)}),{message:"Erro interno no servidor."}}}async function g(){(0,c.clearSessionCookie)(),(0,i.redirect)("/login")}(0,u.ensureServerEntryExports)([m,g]),(0,s.createActionProxy)("bbec7576f1f50640a4a678e3194e37400ea45963",m),(0,s.createActionProxy)("4f7cc3295bc1862da856a082439e474acd72ddb0",g)},49223:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p,metadata:()=>b});var s=t(25036),n=t(53640),o=t.n(n);t(5023);var a=t(72245),i=t(86843);let c=(0,i.createProxy)(String.raw`C:\Programas\PROJETOS\sistema-time-de-campo\src\components\ui\sonner.tsx`),{__esModule:d,$$typeof:u}=c;c.default;let l=(0,i.createProxy)(String.raw`C:\Programas\PROJETOS\sistema-time-de-campo\src\components\ui\sonner.tsx#Toaster`),m=(0,i.createProxy)(String.raw`C:\Programas\PROJETOS\sistema-time-de-campo\src\components\providers\theme-provider.tsx`),{__esModule:g,$$typeof:f}=m;m.default;let x=(0,i.createProxy)(String.raw`C:\Programas\PROJETOS\sistema-time-de-campo\src\components\providers\theme-provider.tsx#ThemeProvider`),b={title:"XON Servi\xe7os",description:"Gest\xe3o de servi\xe7os e checklist"};function p({children:e}){return s.jsx("html",{lang:"pt-BR",suppressHydrationWarning:!0,children:s.jsx("body",{className:(0,a.cn)(o().className,"min-h-screen bg-background font-sans antialiased"),children:(0,s.jsxs)(x,{attribute:"class",defaultTheme:"light",enableSystem:!0,disableTransitionOnChange:!0,children:[e,s.jsx(l,{})]})})})}},92793:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var s=t(25036),n=t(40213);function o(){return s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50/50 dark:bg-slate-900/50 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(n.Z,{className:"h-12 w-12 animate-spin text-primary"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm animate-pulse",children:"Carregando..."})]})})}},68474:(e,r,t)=>{"use strict";t.d(r,{clearSessionCookie:()=>l,createToken:()=>d,getSession:()=>a,requireAdmin:()=>c,requireAuth:()=>i,setSessionCookie:()=>u});var s=t(98601);t(75811);var n=t(77949),o=t(82092);async function a(){let e=n.cookies().get("session")?.value;if(!e)return null;try{let{payload:r}=await (0,o.jwtVerify)(e,o.JWT_SECRET);return{id:r.sub,username:r.username,isAdmin:!!r.isAdmin}}catch{return null}}async function i(){let e=await a();if(!e)throw Error("N\xe3o autenticado.");return e}async function c(){let e=await i();if(!e.isAdmin)throw Error("Acesso n\xe3o autorizado.");return e}async function d(e){return new o.SignJWT({sub:e.id,username:e.username,isAdmin:e.isAdmin}).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("24h").sign(o.JWT_SECRET)}async function u(e){(0,n.cookies)().set("session",e,{httpOnly:!0,secure:!0,sameSite:"lax",path:"/",maxAge:86400})}async function l(){(0,n.cookies)().delete("session")}(0,t(46893).ensureServerEntryExports)([a,i,c,d,u,l]),(0,s.createActionProxy)("01aa194246fb3cd3909854170a6a003e66db9b89",a),(0,s.createActionProxy)("7f6832b04b751148a6382dd64a1cc223449e53b3",i),(0,s.createActionProxy)("8d8f3bd62d0a07b2792f9104701a5c0433fbcdee",c),(0,s.createActionProxy)("bbad0871288a94d710af6fbd6788ce5f0465e0e3",d),(0,s.createActionProxy)("bdb6b21ecc9aab6757183c887af3cd3c576bd3b3",u),(0,s.createActionProxy)("6025ca35376357c0da7f5b807633b24af797ac4b",l)},50841:(e,r,t)=>{"use strict";t.d(r,{prisma:()=>n});var s=t(53524);let n=global.prisma||new s.PrismaClient},82092:(e,r,t)=>{"use strict";t.d(r,{JWT_SECRET:()=>o,SignJWT:()=>s.SignJWT,jwtVerify:()=>s.jwtVerify});var s=t(40378);let n=process.env.JWT_SECRET;if(!n)throw Error("A vari\xe1vel de ambiente JWT_SECRET \xe9 obrigat\xf3ria.");let o=new TextEncoder().encode(n)},19961:(e,r,t)=>{"use strict";t.d(r,{logger:()=>n});class s{log(e,r,t){console.log(JSON.stringify({timestamp:new Date().toISOString(),level:e,message:r,metadata:t}))}info(e,r){this.log("info",e,r)}warn(e,r){this.log("warn",e,r)}error(e,r){this.log("error",e,r)}}let n=new s},72245:(e,r,t)=>{"use strict";t.d(r,{A:()=>l,cn:()=>d,x:()=>u});var s=t(70990),n=t(81774),o=t(67821),a=t(13067),i=t(81389),c=t(66705);function d(...e){return(0,n.m6)((0,s.W)(e))}function u(e){let{osStatus:r,execution:t}=e,s=(r||"").toLowerCase(),n="conclu\xeddo"===s||"concluido"===s||"encerrada"===s,d="em execu\xe7\xe3o"===s||"em execucao"===s,u=r||"Pendente",l="secondary",m=o.Z;if(t){let e="Conclu\xedda";if(t.obs){let r=t.obs.match(/Status: (.*?)\n/);r&&r[1]?e=r[1]:t.obs.includes("Sem Execu\xe7\xe3o")&&(e="Sem Execu\xe7\xe3o")}"encerrada"===s||"conclu\xeddo"===s||"concluido"===s?(l=(u=e).includes("Sem Execu\xe7\xe3o")?"destructive":"success",m=a.Z):"DONE"===t.status?(l=(u=`${e} - Em an\xe1lise`).includes("Sem Execu\xe7\xe3o")?"orange":"light-green",m=i.Z):"PENDING"===t.status||d?(u="Em execu\xe7\xe3o",l="warning",m=c.Z):n&&(u="Conclu\xedda",l="success",m=a.Z)}else d?(u="Em execu\xe7\xe3o",l="warning",m=c.Z):n?(u="Conclu\xedda",l="success",m=a.Z):"cancelado"===s&&(u="Cancelada",l="destructive",m=o.Z);return{label:u,variant:l,icon:m}}function l(e){let r=(e||"").toLowerCase();return"conclu\xedda"===r||"concluida"===r?"success":"sem execu\xe7\xe3o"===r||"cancelada"===r?"destructive":"em execu\xe7\xe3o"===r||"em execucao"===r?"warning":r.includes("sem execu\xe7\xe3o - em an\xe1lise")||r.includes("sem execucao - em analise")?"orange":r.includes("em an\xe1lise")||r.includes("em analise")?"light-green":"secondary"}},5023:()=>{}};